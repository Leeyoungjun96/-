# 빅데이터의 분산처리
### 대규모 분산처리의 프레임워크
#### 구조화 데이터와 비구조화 데이터
* 스키마 : 테이블 컬럼명과 데이터형, 테이블간의 관계
* 구조화된 데이터 : 스키마가 명확하게 정의된 데이터
* 비구조화 데이터 : 텍스트 데이터, 미디어 데이터 등 스키마가 없는 데이터
* 데이터 레이크 : 비구조화 데이터를 분산 스토리지에 저장하고, 분산 시스템에 처리하는것

#### 스키마리스 데이터 : 기본 서식은 있지만 정의가 안됨
* 스키마리스 데이터 : CSV, JSON, XML 등 데이터 서식은 정해져 있지만, 컬럼 수나 데이터형은 명확하지 않은 것

#### 데이터 구조화의 파이프 라인 : 테이블 형식으로 열 지향 스토리지에 장기 보존
* 일반적으로 구조화 데이터는 데이터의 압축률을 높이기 위해 열 지향 스토리지로 저장함
* 팩트 테이블 : 구조화 데이터 중 시간에 따라 증가하는 데이터
* 디멘션 테이블 : 팩트 테이블에 따른 부속 데이터

#### 열 지향 스토리지의 작성 : 분산 스토리지 상에 작성해 효율적으로 데이터를 집계
* 하둡 열지향 스토리지
  * Apache ORC : 구조화 데이터를 위한 열 지향 스토리지로 처음에 스키마를 정한 후 데이터를 저장
  * Apache Parquet : 스키마리스에 가까운 데이터 구조로 JSON과 같은 데이터도 그대로 저장 가능
* 비구조화 데이터를 읽어 들여, 열 지향 스토리지로 변환하는 과정에서 데이터의 가공 및 압축을 위해 많은 리소스가 필요한데, 그래서 사용되는 것이 hadoop과 spark의 분산 처리 프레임워크

#### Hadoop : 분산 데이터 처리의 공통 플랫폼
* Yarn이라 불리는 새로운 리소스 관리자 상에서 복수의 분산 애플리케이션이 동작하는 구성, 대규모 분산시스템을 구축하기 위한 공통 플랫폼의 역할

#### 분산 시스템의 구성 요소 : HDFS, YARN, MapReduce
* HDFS : 분산 파일 시스템 (Hadoop Distributed File System)
* YARN : 리소스 관리자 (Yet Another Resource Negotiator)
* MapReduce : 분산 데이터 처리 (Distrbuted Data Processing)

#### 분산 파일 시스템과 리소스 관리자 : HDFS, YARN
* Hadoop에서 처리되는 데이터 대부분은 분산 파일 시스템인 HDFS에 저장, 네트워크에 연결된 파일 서버와 같은 존재이지만, 다수의 컴퓨터에 파일을 복사하여 중복성을 높임
* YARN은 애플리케이션이 사용하는 CPU 코어와 메모리를 컨테이너(container) 단위로 관리 (OS수준의 가상화 기술이 아닌 애플리케이션 레벨의 기술) 
* Hadoop에서 분산 애플리케이션을 실행하면 YARN이 클러스터 전체의 부하를 보고 비어 있는 호스트부터 컨테이너를 할당

#### 분산 데이터 처리 및 쿼리 엔진 : MapReduce, Hive
* MapReduce : 대용량 데이터를 배치 처리하기 위한 시스템, YARN 상에서 동작하는 분산 애플리케이션 중 하나로 분산 시스템에서 데이터 처리를 실행하는데 사용
* Apache Hive : 초기 Hive의 실행 특성은 MapReduce에 의존, 데이터 집계가 목적을 설계된 쿼리 엔진
* Hive Tez : Tez에서는 불필요한 단계를 감소시켜 처리가 짧아짐과 동시에, 스테이지 사이의 대기 시간이 없어 처리 전체가 동시에 실행되서 실행 시간이 단축 (장시간의 배치 처리를 가정해 한정된 리소스를 유효하게 활용하도록 설계)

#### 대화형 쿼리 엔진 : Impala, Presto
* 대량의 비구조화 데이터를 가공하는 무거운 배치 처리에는 높은 처리량(Throughput)으로 리소스를 활용할 수 있는 Hive를 이용
* 구조화 데이터를 대화식으로 집계하고자 할 때, 지연이 적은 Impala와 Presto 등을 사용

#### Spark : 인 메모리 형의 고속 데이터 처리
* Spark : 대량의 메모리를 활용하여 고속화를 실현, 가능한 많은 데이터를 메모리상에 올린 상태로 두어 디스크에는 아무것도 기록하지 않는다
* 컴퓨터가 비정상 종료하면 중간까지 처리한 중간 데이터가 사라지지만, 그때는 처리르 다시 시도해서 잃어버린 중간 데이터를 다시 만들면 됨

#### MapReduce 대체하기 : Spark의 입지
* 대규모 배치 처리뿐만 아니라 SQL에 의한 대화형 쿼리 실행과 실시간 스트림 처리에 이르기까지 널리 이용됨

### 쿼리 엔진
#### 데이터 마트 구축의 파이프라인
* Hive에서 만든 각 테이블의 정보는 'Hive 메타 스토어'에 저장됨

#### Hive에 의한 구조화 데이터 작성
* 